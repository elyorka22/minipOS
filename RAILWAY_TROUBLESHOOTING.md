# Решение проблемы "Not Found" на Railway

## Ошибка: "Not Found - The train has not arrived at the station"

Эта ошибка означает, что приложение не запустилось или не отвечает на запросы.

## Шаг 1: Проверьте логи в Railway

1. Откройте Railway Dashboard
2. Выберите ваш проект
3. Перейдите на вкладку **"Deployments"** или **"Logs"**
4. Проверьте последние логи

### Что искать в логах:

✅ **Хорошие признаки:**
```
Сервер запущен на порту 3000
Доступен по адресу: http://0.0.0.0:3000
✓ PostgreSQL успешно подключен и инициализирован
```

❌ **Плохие признаки:**
- `Error: Cannot find module`
- `EADDRINUSE` (порт занят)
- `Error: listen EACCES` (нет доступа к порту)
- Ошибки подключения к базе данных
- Процесс завершается сразу после запуска

## Шаг 2: Проверьте переменные окружения

1. В Railway Dashboard → ваш проект → **"Variables"**
2. Убедитесь, что есть:
   - `PORT` (Railway устанавливает автоматически)
   - `DATABASE_URL` (если используете PostgreSQL)

## Шаг 3: Проверьте конфигурацию проекта

### Проверьте `package.json`:

```json
{
  "scripts": {
    "start": "node server.js"
  },
  "engines": {
    "node": ">=18.0.0"
  }
}
```

### Проверьте `server.js`:

Убедитесь, что сервер слушает на `0.0.0.0`:

```javascript
app.listen(PORT, '0.0.0.0', () => {
    console.log(`Сервер запущен на порту ${PORT}`);
});
```

## Шаг 4: Проверьте деплой

1. В Railway Dashboard → **"Deployments"**
2. Проверьте статус последнего деплоя:
   - ✅ **Success** - деплой успешен
   - ❌ **Failed** - деплой не удался
   - ⏳ **Building** - идет сборка

### Если деплой Failed:

1. Нажмите на деплой
2. Посмотрите логи сборки
3. Найдите ошибку

## Шаг 5: Перезапустите сервис

1. В Railway Dashboard → ваш проект
2. Нажмите на три точки (⋮) рядом с сервисом
3. Выберите **"Restart"**

## Шаг 6: Проверьте URL

Railway предоставляет URL вида:
- `https://your-project-name.up.railway.app`
- Или кастомный домен, если настроен

Убедитесь, что используете правильный URL из настроек проекта.

## Шаг 7: Проверьте health endpoint

Попробуйте открыть:
```
https://your-project.railway.app/health
```

Должно вернуть:
```json
{
  "status": "ok",
  "database": {
    "status": "connected"
  }
}
```

## Частые проблемы и решения

### Проблема 1: Модуль не найден

**Ошибка:** `Error: Cannot find module './database'`

**Решение:**
- Убедитесь, что файл `database.js` существует в корне проекта
- Проверьте, что он закоммичен в Git
- Перезапустите деплой

### Проблема 2: Порт не указан

**Ошибка:** `PORT is not defined`

**Решение:**
- Railway автоматически устанавливает `PORT`
- Если проблема сохраняется, добавьте в Variables:
  - `PORT` = `3000` (или другой порт)

### Проблема 3: База данных не подключена

**Ошибка:** `База данных не инициализирована`

**Решение:**
- Добавьте PostgreSQL сервис в Railway
- Добавьте `DATABASE_URL` в Variables через Reference
- Перезапустите сервис

### Проблема 4: Приложение падает при запуске

**Решение:**
1. Проверьте логи на ошибки
2. Убедитесь, что все зависимости установлены
3. Проверьте синтаксис кода
4. Попробуйте запустить локально: `npm start`

## Диагностика через Railway CLI

Если установлен Railway CLI:

```bash
# Войдите в Railway
railway login

# Подключитесь к проекту
railway link

# Посмотрите логи
railway logs

# Проверьте переменные
railway variables
```

## Проверка локально

Перед деплоем проверьте локально:

```bash
# Установите зависимости
npm install

# Запустите сервер
npm start

# Откройте в браузере
# http://localhost:3000
```

Если локально не работает, то и на Railway не будет работать.

## Получение помощи

Если проблема не решена:

1. Скопируйте полные логи из Railway
2. Проверьте, что все файлы закоммичены в Git
3. Убедитесь, что `package.json` корректен
4. Проверьте, что `server.js` существует и запускается

## Быстрая проверка

Выполните эти команды локально:

```bash
# Проверка структуры проекта
ls -la
ls -la public/
ls -la database.js server.js package.json

# Проверка зависимостей
npm install
npm start
```

Если все работает локально, но не работает на Railway - проверьте логи деплоя.

